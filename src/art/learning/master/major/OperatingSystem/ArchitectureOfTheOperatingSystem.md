---
title: 操作系统的体系结构
date: 2025-08-15
icon: 'gears'
order: 7
category: 
    - '408'
    - '操作系统'
    - 考研  
---

## 操作系统的内核

![计算机的体系结构](//store.s1r0ko.top/svg/m/os/7/1_ver_1.svg)

如图所示，操作系统内核由以下几个部分组成：

- 进程管理、存储器管理、设备管理等功能

- 时钟管理

- 中断处理

- 原语

::: tip 原语

原语是一种特殊的程序具有原子性，也就是说：这段程序的运行必须**一气呵成**，不可被“中断”

:::

内核是操作系统最基本、最核心的部分实现操作系统内核功能的那些程序就是内核程序

操作系统中，内核需要运行在内核态，非内核功能运行在用户态

**CPU 状态切换的过程是有成本的**，要消耗不少时间，频繁地切换会**降低系统性能**

内核分为两种：

### 大内核

将操作系统的**主要功能模块**都作为系统内核，运行在核心态

采用大内核的系统通常也采用了“模块化”的设计思想

大内核为图中标注为内核的部分

- 优点：高性能，内核内的各种功能都可以直接相互调用

- 缺点：
    - 内核代码庞大，结构混乱，难以维护
    - 大内核中的某个功能模块出错，可能导致整个系统崩溃

### 微内核

只把**最基本的功能**保留在内核（中断、原语、进程通信等）

微内核只保留和**硬件相关**的部分

- 优点：
    - 内核功能少，结构清晰，方便维护
    - 内核外的某个功能出错不会导致整个系统崩溃

- 缺点：
    - 需要频繁地在核心态和用户态之间切换，性能低；且内核内的各个功能**不能直接相互调用**，需要通过内核的“消息传递”来**间接通信**

## 分层结构的内核

内核分多层，每层可单向调用更低一层提供的接口

- 优点：
    - **便于调试和验证**，自底向上逐层调试验证
    - 易扩充和易维护，各层之间调用接口清晰固定

- 缺点：
    - 仅可调用相邻低层，难以合理定义各层的边界
    - 效率低，不可跨层调用，系统调用执行时间长

## 模块化的内核设计

将内核划分为多个模块，各模块之间相互协作。

内核 = 主模块 + 可加载内核模块
主模块：只负责核心功能，如进程调度、内存管理等
可加载内核模块：可以动态加载新模块到内核，而无需重新编译整个内核

- 优点：
    - 内核代码量少，结构清晰，方便维护
    - 可根据需要动态加载新模块，而无需重新编译整个内核


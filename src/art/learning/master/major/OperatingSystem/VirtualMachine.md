---
title: 虚拟机
date: 2025-08-16
icon: 'gears'
order: 9
category: 
    - '408'
    - '操作系统'
    - 考研  
---

## 虚拟机的定义

虚拟机：使用虚拟化技术，将一台物理机器虚拟化为多台虚拟机器（ Virtual Machine , VM ），每个虚拟机器都可以独立运行一个操作系统

同义术语:虚拟机管理程序 / 虚拟机监控程序 / Virtual Machine Monitor / Hypervisor

虚拟机管理程序分为两种：

- 直接运行于硬件上——①

- 运行在宿主操作系统上——②

两类虚拟机管理程序（ VMM ）对比：

|  \  | 第 ① 类虚拟机管理程序 | 第 ② 类虚拟机管理程序 |
| :--: | :------------------: | :------------------: |
| 对物理资源的控制权 | 直接运行在硬件之上，能直接控制和分配物理资资 | 运行在 Host OS 之上，依赖于 Host OS 为其分配物理资源 |
| 资源分配方式 | 在安装 Guest OS 时， VMM 要在原本的硬盘上自行分配存储空间，类似于“外核”的分配方式，分配未经抽象的物理硬件资源 | Guest OS 拥有自己的虚拟磁盘，该盘实际上是 Host OS 文件系统中的一个大文件。Guest OS 分配到的内存是虚拟内存，而不是物理内存 |
| 性能 | 性能更好 | 性能更差，需要 Host OS 作为“中介” |
| 可支持的虚拟机数量 | 更多，不需要和 Host OS 竞争资源，相同的硬件资源可以支持更多的虚拟机 | 更少，Host OS 本身需要使用物理资源，HostOS 上运行的其他进程也需要物理资源 | 
| 虚拟机的可迁移性 | 更差 | 更好，只需导出虚拟机镜像文件即可迁移到另台 Host OS 上，商业化应用更广泛 |
| 运行模式 | 第一类VMM运行在最高特权级（ Ring 0 ），可以执行最高特权的指令。 | 第二类 VMM 部分运行在用户态、部分运行在内核态。Guest OS 发出的系统调用会被 VMM 截获,并转化为 VMM 对 Host OS 的系统调用 |





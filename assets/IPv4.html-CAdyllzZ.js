import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as o,b as s,a as n,e,d as i,w as p,r as d,o as l}from"./app-CviA1esZ.js";const m={};function c(g,t){const a=d("RouteLink");return l(),o("div",null,[t[3]||(t[3]=s('<h2 id="ipv4-协议" tabindex="-1"><a class="header-anchor" href="#ipv4-协议"><span>IPv4 协议</span></a></h2><figure><img src="https://store.s1r0ko.top/svg/m/cn/20/1_ver_1.svg" alt="各层协议之间关系" tabindex="0" loading="lazy"><figcaption>各层协议之间关系</figcaption></figure><div class="hint-container tip"><p class="hint-container-title">提示</p><p>各层协议之中， <strong id="red-msg">IP 协议（Internet Protocol）是互联网的核心</strong></p><p>ARP 协议用于查询同一网络中的 <code>&lt;主机 IP 地址, MAC 地址&gt;</code> 之间的映射关系</p><p>ICMP 协议用于网络层实体之间互相通知“异常事件”</p><p>IGMP 协议用于实现 IP 组播</p></div><h2 id="ip-数据报的格式" tabindex="-1"><a class="header-anchor" href="#ip-数据报的格式"><span>IP 数据报的格式</span></a></h2><figure><img src="//store.s1r0ko.top/svg/m/cn/20/2_ver_2.svg" alt="IP 数据报的格式" tabindex="0" loading="lazy"><figcaption>IP 数据报的格式</figcaption></figure><p>IP 数据报分为<strong>首部</strong>和<strong>数据部分</strong>两个部分</p><p>首部的结构如图所示</p><div class="hint-container info"><p class="hint-container-title">首部</p><p>首部分为固定部分和可变部分两个部分</p><p>固定部分长度为 <strong>20 字节</strong>，可变部分长度为 <strong>0 ~ 40 字节不等</strong></p><p>各部分详解：</p><ul><li>固定部分</li></ul><table><thead><tr><th>字段名</th><th>bit 位数</th><th>说明</th></tr></thead><tbody><tr><td>版本</td><td>4</td><td>用于区分网络层使用的 IP 协议版本，使用二进制表示 4 就是 IPv4 协议，使用二进制表示 6 就是 IPv6 协议</td></tr><tr><td>首部长度</td><td>4</td><td>用于指示 IP 数据报的首部长度，单位为 4B，例如：一个首部长度为 20 B 的 IP 数据报，这里的内容为二进制表示的 5 即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mo>×</mo><mn>4</mn><mi>B</mi><mo>=</mo><mn>20</mn><mi>B</mi></mrow><annotation encoding="application/x-tex">5 \\times 4B = 20B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">4</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">20</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></td></tr><tr><td><s>区分服务</s></td><td>8</td><td><s>一般用不到， 408 不考</s></td></tr><tr><td>总长度</td><td>16</td><td>表示范围 0 ~ 65535 单位为 1B ，表示整个 IP 数据报的长度（首部 + 数据部分）</td></tr><tr><td>标识</td><td>16</td><td>由 IP 数据报的“源主机”生成，通常是自增序列，相当于一个数据报的识别码，数据报进行分片时，各分片的标识码必须相同</td></tr><tr><td>标志<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup></td><td>3</td><td>三个 bit 分别为三个不同含义，最低位 MF 、 次低位 DF 、 最高位不需要了解意思，具体指代详见脚注 1，假设一个标志位为 001 则分别为最高位、 次低位 MF 、 最低位 DF</td></tr><tr><td>片偏移</td><td>13</td><td>表示该数据部分在“被分片”之前所处的位置，以 8 B 为单位</td></tr><tr><td>生存时间</td><td>8</td><td>代表该数据报在网络中可通过的路由器数的最大值。常记为 TTL<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup></td></tr><tr><td>协议</td><td>8</td><td>表示当前数据报正在为哪一个协议服务，如果是 TCP 该值设置为 6 、 如果是 UDP 该值设置为 17</td></tr><tr><td>首部校验和</td><td>16</td><td>经过的每个路由器都会对首部进行校验（不校验数据部分），如果该字段全设为 0 ，表示不用校验；校验和的计算方法与 UDP 相同</td></tr><tr><td>源地址</td><td>32</td><td>发送主机的 IP 地址</td></tr><tr><td>目的地址</td><td>32</td><td>接收主机的 IP 地址</td></tr></tbody></table><ul><li>可变部分</li></ul><table><thead><tr><th>字段名</th><th>bit 位数</th><th>说明</th></tr></thead><tbody><tr><td>填充</td><td>不定长</td><td>用于将 IP 数据报首部填充至 4B 的整数倍</td></tr></tbody></table></div><div class="hint-container info"><p class="hint-container-title">数据部分</p><p>数据部分长度范围：0 B ~ ( 65535 - 20 ) B ，扣掉的 20 B 为首部的最小长度，值不需要记</p><p>上面只是受到首部总长度字段的限制，也就是<strong>理论最大值</strong>，实际上 IP 数据报的长度通常会受到数据链路层的最短 / 长帧长的限制</p></div>',9)),n("p",null,[t[1]||(t[1]=e("一个数据链路层数据帧能承载的最大数据量称为最大传输单元（MTU）。如")),i(a,{to:"/art/learning/master/major/ComputerNetworks/LocalAreaNetwork.html#v2-%E6%A0%87%E5%87%86%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91-mac-%E5%B8%A7"},{default:p(()=>t[0]||(t[0]=[e("以太网帧")])),_:1}),t[2]||(t[2]=e(" MTU = 1500 B"))]),t[4]||(t[4]=s('<p>如果一个 IP 数据报总长度超出了下一段链路的 MTU 就需要进行分片处理，依次传递这些分片给下一个节点</p><p>拆分时需要注意需要按 MTU 大小减去 IP 数据报的首部长度，得到的数据部分长度才是分片后的数据长度</p><div class="hint-container warning"><p class="hint-container-title">注意</p><ul><li><p>IP 数据报的“分片”可能在源主机或任何一个路由器中发生</p></li><li><p>只有目的主机才会对分片进行**“重组”**</p></li><li><p>各分片有可能以乱序到达目的主机</p></li><li><p>由于首部“片偏移”字段是以 <strong>8 B</strong> 为单位，因此，除<strong>最后一个分片</strong>外，其他每个分片的数据部分必须是 <strong>8 B</strong> 的整数倍</p></li><li><p><strong id="red-msg">当标志位 DF = 1 且下一段数据链路层数据帧长也无法满足这一份数据报时，路由器会选择丢弃该数据报，并且向源主机发送 ICMP 报文代表发生异常发送失败</strong></p></li><li><p>4 1 8，首部长度 4B 为单位，总长度 1B 为单位，片偏移 8B 为单位</p></li></ul></div><h2 id="ip-地址详解" tabindex="-1"><a class="header-anchor" href="#ip-地址详解"><span>IP 地址详解</span></a></h2><p>IP 地址是一个 32 位的二进制数，通常用点分十进制的形式表示，例如： 192.168.1.1</p><p>IP 地址资源由 ICANN（互联网名字与数字分配机构）进行分配（有偿分配），每个 IP 地址都是唯一的，用于标识互联网上的每一个主机</p><p>ICANN 将 IP 地址分为以下几类（如图）：</p><figure><img src="//store.s1r0ko.top/svg/m/cn/20/3_ver_1.svg" alt="IP 地址分类" tabindex="0" loading="lazy"><figcaption>IP 地址分类</figcaption></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p>标识位含义对照表：</p><table><thead><tr><th>标志位</th><th>值</th><th>含义</th></tr></thead><tbody><tr><td>MF</td><td>0</td><td>表示当前分片是 IP 数据报的最后一个分片</td></tr><tr><td>MF</td><td>1</td><td>表示当前分片不是 IP 数据报的最后一个分片，后面还有分片</td></tr><tr><td>DF</td><td>0</td><td>表示 IP 数据报可以进行分片</td></tr><tr><td>DF</td><td>1</td><td>表示 IP 数据报不能进行分片</td></tr></tbody></table><a href="#footnote-ref1" class="footnote-backref">↩︎</a></li><li id="footnote2" class="footnote-item"><p>生存时间 TTL ：</p><ul><li>TTL 的初始值通常由源主机设置</li><li>每经过一个路由器， TTL 就会减 1</li><li>当 TTL 减为 0 时，该数据报就会被丢弃，并且向源主机发送 ICMP 报文代表发生异常发送失败</li></ul><a href="#footnote-ref2" class="footnote-backref">↩︎</a></li></ol></section>',10))])}const I=r(m,[["render",c]]),f=JSON.parse('{"path":"/art/learning/master/major/ComputerNetworks/IPv4.html","title":"IPv4","lang":"zh-CN","frontmatter":{"title":"IPv4","date":"2025-07-23T00:00:00.000Z","icon":"earth-americas","order":20,"category":["408","计算机网络","考研"],"description":"IPv4 协议 各层协议之间关系各层协议之间关系 提示 各层协议之中， IP 协议（Internet Protocol）是互联网的核心 ARP 协议用于查询同一网络中的 <主机 IP 地址, MAC 地址> 之间的映射关系 ICMP 协议用于网络层实体之间互相通知“异常事件” IGMP 协议用于实现 IP 组播 IP 数据报的格式 IP 数据报的格式I...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"IPv4\\",\\"image\\":[\\"https://store.s1r0ko.top/svg/m/cn/20/1_ver_1.svg\\",\\"//store.s1r0ko.top/svg/m/cn/20/2_ver_2.svg\\",\\"//store.s1r0ko.top/svg/m/cn/20/3_ver_1.svg\\"],\\"datePublished\\":\\"2025-07-23T00:00:00.000Z\\",\\"dateModified\\":\\"2025-07-24T11:40:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"KurimulaAiri\\",\\"url\\":\\"https://github.com/KurimulaAiri\\"}]}"],["meta",{"property":"og:url","content":"https://md.s1r0ko.top/art/learning/master/major/ComputerNetworks/IPv4.html"}],["meta",{"property":"og:site_name","content":"博客与资料库"}],["meta",{"property":"og:title","content":"IPv4"}],["meta",{"property":"og:description","content":"IPv4 协议 各层协议之间关系各层协议之间关系 提示 各层协议之中， IP 协议（Internet Protocol）是互联网的核心 ARP 协议用于查询同一网络中的 <主机 IP 地址, MAC 地址> 之间的映射关系 ICMP 协议用于网络层实体之间互相通知“异常事件” IGMP 协议用于实现 IP 组播 IP 数据报的格式 IP 数据报的格式I..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://store.s1r0ko.top/svg/m/cn/20/1_ver_1.svg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-24T11:40:15.000Z"}],["meta",{"property":"article:published_time","content":"2025-07-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-24T11:40:15.000Z"}]]},"git":{"createdTime":1753276972000,"updatedTime":1753357215000,"contributors":[{"name":"KurimulaAiri","username":"KurimulaAiri","email":"1095370199@qq.com","commits":2,"url":"https://github.com/KurimulaAiri"}]},"readingTime":{"minutes":4.56,"words":1369},"filePathRelative":"art/learning/master/major/ComputerNetworks/IPv4.md","excerpt":"<h2>IPv4 协议</h2>\\n<figure><img src=\\"https://store.s1r0ko.top/svg/m/cn/20/1_ver_1.svg\\" alt=\\"各层协议之间关系\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>各层协议之间关系</figcaption></figure>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>各层协议之中， <strong id=\\"red-msg\\">IP 协议（Internet Protocol）是互联网的核心</strong></p>\\n<p>ARP 协议用于查询同一网络中的 <code>&lt;主机 IP 地址, MAC 地址&gt;</code> 之间的映射关系</p>\\n<p>ICMP 协议用于网络层实体之间互相通知“异常事件”</p>\\n<p>IGMP 协议用于实现 IP 组播</p>\\n</div>","autoDesc":true}');export{I as comp,f as data};

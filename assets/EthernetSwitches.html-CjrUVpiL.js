import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,b as n,o as m}from"./app-CviA1esZ.js";const e={};function p(i,a){return m(),t("div",null,a[0]||(a[0]=[n('<h2 id="特点" tabindex="-1"><a class="header-anchor" href="#特点"><span>特点</span></a></h2><ul><li><p>交换机等同于多端口网桥</p></li><li><p>交换机工作在数据链路层，可以根据目的 MAC 地址转发帧</p></li><li><p>交换机的每个端口通常都支持<strong>全双工模式</strong>，除非连接的是<strong>集线器</strong></p></li><li><p>交换机通过交换表记录 MAC 地址和端口号的关系，以达到正确转发帧的目的</p></li><li><p>交换机通过学习机制自动更新交换表</p></li></ul><h2 id="自学习功能" tabindex="-1"><a class="header-anchor" href="#自学习功能"><span>自学习功能</span></a></h2><p>一个标准的 V2 以太网 MAC 帧： 6 6 2 N 4 ，收发协数验</p><p>假设以下情况：</p><p>以节点字母代号代表其具体 MAC 地址</p><p>节点之间互相知道彼此的 MAC 地址，并依次发送以下帧：</p><ol><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">A \\rightarrow C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>→</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">B \\rightarrow C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">C \\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">H \\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo>→</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">H \\rightarrow C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>→</mo><mi>H</mi></mrow><annotation encoding="application/x-tex">C \\rightarrow H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo>→</mo><mtext>广播</mtext></mrow><annotation encoding="application/x-tex">J \\rightarrow \\text{广播}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord cjk_fallback">广播</span></span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>→</mo><mi>J</mi></mrow><annotation encoding="application/x-tex">K \\rightarrow J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span></p></li></ol><figure><img src="https://store.s1r0ko.top/svg/m/cn/19/1_ver_1.svg" alt="交换机自学习示例图" tabindex="0" loading="lazy"><figcaption>交换机自学习示例图</figcaption></figure><p>开始时，两台交换机各自维护的交换表均为空，如下：</p><table><thead><tr><th style="text-align:center;">交换机端口号</th><th style="text-align:center;">1</th><th style="text-align:center;">……</th><th style="text-align:center;">8</th></tr></thead><tbody><tr><td style="text-align:center;">MAC 地址</td><td style="text-align:center;">NULL</td><td style="text-align:center;">……</td><td style="text-align:center;">NULL</td></tr></tbody></table><ol><li>收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">A \\rightarrow C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> 帧，学习到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 的 MAC 地址，将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 的 MAC 地址和端口号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 记录到交换表中，此时由于交换表中没有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> 的记录，所以将该帧向全部连接的子节点发送出去，所有节点除 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> 外接收到该帧都会丢弃，并且由于其连接到交换机 2 所以交换机也会重复这一步骤，由于交换机 2 的交换表没有记录过该帧发送方的 MAC 地址并且该帧从端口 1 进入，所以交换机 2 会将该帧的发送方 MAC 地址，也就是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 的 MAC 地址映射记录到端口 1 上，此时双方的交换表应该是这样的</li></ol><figure><img src="https://store.s1r0ko.top/svg/m/cn/19/2_ver_1.svg" alt="当前交换表状态" tabindex="0" loading="lazy"><figcaption>当前交换表状态</figcaption></figure><ol start="2"><li>收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>→</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">B \\rightarrow C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> 的处理和步骤 1 类似，此时交换机 1 做的操作就是记录 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> MAC 地址然后广播，交换机 2 的操作也是记录 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> MAC 地址然后广播，所以双方的交换表应该是这样的：</li></ol><figure><img src="https://store.s1r0ko.top/svg/m/cn/19/3_ver_1.svg" alt="当前交换表状态" tabindex="0" loading="lazy"><figcaption>当前交换表状态</figcaption></figure><ol start="3"><li>交换机 1 收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">C \\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 帧时，交换表中没有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> 于是记录 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>，由于接收方已经存在交换表中，于是交换机 1 将帧只转发到端口 1</li></ol><figure><img src="https://store.s1r0ko.top/svg/m/cn/19/4_ver_1.svg" alt="当前交换表状态" tabindex="0" loading="lazy"><figcaption>当前交换表状态</figcaption></figure><ol start="4"><li>交换机 2 收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">H \\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 帧时，交换表中没有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span> 于是记录 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span>，由于接收方已经存在交换表中，于是交换机 2 将帧只转发到端口 1 ，此时交换机 1 收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">H \\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 帧时，由于交换表没有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span> 帧记录，于是记录该地址和端口，接收方 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 已在交换表内，于是直接转发到端口 1 去</li></ol><figure><img src="https://store.s1r0ko.top/svg/m/cn/19/5_ver_1.svg" alt="当前交换表状态" tabindex="0" loading="lazy"><figcaption>当前交换表状态</figcaption></figure><ol start="5"><li>交换机 2 收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo>→</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">H \\rightarrow C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> 帧时，不记录 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span> ，由于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> 不在交换表 2 内，于是进行广播，到达交换机 1 后，不登记 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span> ，并且直接向 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> 发送</li></ol><figure><img src="https://store.s1r0ko.top/svg/m/cn/19/5_ver_1.svg" alt="当前交换表状态" tabindex="0" loading="lazy"><figcaption>当前交换表状态</figcaption></figure><ol start="6"><li>交换机 1 收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>→</mo><mi>H</mi></mrow><annotation encoding="application/x-tex">C \\rightarrow H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span> 帧时，不记录 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> ，直接发给端口 8 ，交换机收到帧后，由于没有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> 记录，于是登记 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> ，然后直接转发给端口 2</li></ol><figure><img src="https://store.s1r0ko.top/svg/m/cn/19/6_ver_1.svg" alt="当前交换表状态" tabindex="0" loading="lazy"><figcaption>当前交换表状态</figcaption></figure><ol start="7"><li>交换机 2 收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> 发送的广播帧，记录 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> 位置，然后广播发送（发送到除入口外的所有端口），交换机 1 收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> 发送的广播帧，记录 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> 位置，然后广播发送</li></ol><figure><img src="https://store.s1r0ko.top/svg/m/cn/19/7_ver_2.svg" alt="当前交换表状态" tabindex="0" loading="lazy"><figcaption>当前交换表状态</figcaption></figure><ol start="8"><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> 向集线器发送 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>→</mo><mi>J</mi></mrow><annotation encoding="application/x-tex">K \\rightarrow J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> 帧，此时由于这两台设备连接同一个集线器，集线器向所有端口发送该帧， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> 不需要经过交换机即可接收到，交换机 2 收到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>→</mo><mi>J</mi></mrow><annotation encoding="application/x-tex">K \\rightarrow J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> 帧，交换机 2 记录 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> ，由于发送方和接收方在同一端口，于是不进行再次转发</li></ol><figure><img src="https://store.s1r0ko.top/svg/m/cn/19/8_ver_1.svg" alt="当前交换表状态" tabindex="0" loading="lazy"><figcaption>当前交换表状态</figcaption></figure><p>假设此时， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span> 由交换机 2 的端口 2 转移到交换机 1 的端口 7</p><p>每个交换表中的项都有设置有效期，过期后该项作废，可以解决这个换接口导致发送失败的问题，或者此时更新位置的节点发送了一个帧，交换机收到这个帧后发现此 MAC 地址的端口号变了，就会覆盖原来的端口号</p><h2 id="交换方式" tabindex="-1"><a class="header-anchor" href="#交换方式"><span>交换方式</span></a></h2><p>交换机如何根据 MAC 地址转发帧？</p><h3 id="直通交换" tabindex="-1"><a class="header-anchor" href="#直通交换"><span>直通交换</span></a></h3><p>仅读取帧的前 6 个字节存入高速缓存，并检查交换表，发送到对应端口，类似于电路交换</p><ul><li><p>优点：转发时延低</p></li><li><p>缺点：不适用于需要速率匹配、协议转换或差错检测的线路</p></li></ul><h3 id="存储转发交换" tabindex="-1"><a class="header-anchor" href="#存储转发交换"><span>存储转发交换</span></a></h3><p>将这个帧存储到高速缓存中，读取前 6 个字节，进行转发操作，期间也可以对帧进行差错检测等其他复杂操作</p><ul><li><p>优点：适用于需要速率匹配、协议转换或差错检测的线路</p></li><li><p>缺点：转发时延高</p></li></ul>',37)]))}const o=s(e,[["render",p]]),h=JSON.parse('{"path":"/art/learning/master/major/ComputerNetworks/EthernetSwitches.html","title":"以太网交换机","lang":"zh-CN","frontmatter":{"title":"以太网交换机","date":"2025-07-22T00:00:00.000Z","icon":"earth-americas","order":19,"category":["408","计算机网络","考研"],"description":"特点 交换机等同于多端口网桥 交换机工作在数据链路层，可以根据目的 MAC 地址转发帧 交换机的每个端口通常都支持全双工模式，除非连接的是集线器 交换机通过交换表记录 MAC 地址和端口号的关系，以达到正确转发帧的目的 交换机通过学习机制自动更新交换表 自学习功能 一个标准的 V2 以太网 MAC 帧： 6 6 2 N 4 ，收发协数验 假设以下情况：...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"以太网交换机\\",\\"image\\":[\\"https://store.s1r0ko.top/svg/m/cn/19/1_ver_1.svg\\",\\"https://store.s1r0ko.top/svg/m/cn/19/2_ver_1.svg\\",\\"https://store.s1r0ko.top/svg/m/cn/19/3_ver_1.svg\\",\\"https://store.s1r0ko.top/svg/m/cn/19/4_ver_1.svg\\",\\"https://store.s1r0ko.top/svg/m/cn/19/5_ver_1.svg\\",\\"https://store.s1r0ko.top/svg/m/cn/19/5_ver_1.svg\\",\\"https://store.s1r0ko.top/svg/m/cn/19/6_ver_1.svg\\",\\"https://store.s1r0ko.top/svg/m/cn/19/7_ver_2.svg\\",\\"https://store.s1r0ko.top/svg/m/cn/19/8_ver_1.svg\\"],\\"datePublished\\":\\"2025-07-22T00:00:00.000Z\\",\\"dateModified\\":\\"2025-07-23T08:09:22.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"KurimulaAiri\\",\\"url\\":\\"https://github.com/KurimulaAiri\\"}]}"],["meta",{"property":"og:url","content":"https://md.s1r0ko.top/art/learning/master/major/ComputerNetworks/EthernetSwitches.html"}],["meta",{"property":"og:site_name","content":"博客与资料库"}],["meta",{"property":"og:title","content":"以太网交换机"}],["meta",{"property":"og:description","content":"特点 交换机等同于多端口网桥 交换机工作在数据链路层，可以根据目的 MAC 地址转发帧 交换机的每个端口通常都支持全双工模式，除非连接的是集线器 交换机通过交换表记录 MAC 地址和端口号的关系，以达到正确转发帧的目的 交换机通过学习机制自动更新交换表 自学习功能 一个标准的 V2 以太网 MAC 帧： 6 6 2 N 4 ，收发协数验 假设以下情况：..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://store.s1r0ko.top/svg/m/cn/19/1_ver_1.svg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-23T08:09:22.000Z"}],["meta",{"property":"article:published_time","content":"2025-07-22T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-23T08:09:22.000Z"}]]},"git":{"createdTime":1753168519000,"updatedTime":1753258162000,"contributors":[{"name":"KurimulaAiri","username":"KurimulaAiri","email":"1095370199@qq.com","commits":4,"url":"https://github.com/KurimulaAiri"}]},"readingTime":{"minutes":4.38,"words":1313},"filePathRelative":"art/learning/master/major/ComputerNetworks/EthernetSwitches.md","excerpt":"<h2>特点</h2>\\n<ul>\\n<li>\\n<p>交换机等同于多端口网桥</p>\\n</li>\\n<li>\\n<p>交换机工作在数据链路层，可以根据目的 MAC 地址转发帧</p>\\n</li>\\n<li>\\n<p>交换机的每个端口通常都支持<strong>全双工模式</strong>，除非连接的是<strong>集线器</strong></p>\\n</li>\\n<li>\\n<p>交换机通过交换表记录 MAC 地址和端口号的关系，以达到正确转发帧的目的</p>\\n</li>\\n<li>\\n<p>交换机通过学习机制自动更新交换表</p>\\n</li>\\n</ul>\\n<h2>自学习功能</h2>\\n<p>一个标准的 V2 以太网 MAC 帧： 6 6 2 N 4 ，收发协数验</p>","autoDesc":true}');export{o as comp,h as data};
